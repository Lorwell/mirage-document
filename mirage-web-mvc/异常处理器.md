## 介绍

如果在请求路由映射期间发生异常或从请求处理程序（例如 `@Controller`）抛出异常，则`VertxRouterRequestMappingMappingRequestHandler`委托到`HandlerExceptionResolverComposite` 以解决异常并提供错误处理的结果。

以下说明了可用的`HandlerExceptionResolver`的实现

| 实现对象                            | 描述                                                         |
| ----------------------------------- | ------------------------------------------------------------ |
| `ExceptionHandlerExceptionResolver` | 通过调用声明`@ControllerAdvice` 注解类中，标识`@ExceptionHandler`注解的方法来解决异常。请查阅<a href="#ExceptionHandlerExceptionResolver">ExceptionHandlerExceptionResolver</a> |

### 异常解析器责任链

 您可以通过在 `MirageWebMvcConfigurer`配置中注册多个`HandlerExceptionResolver`来形成异常解析器链，系统默认包含`ExceptionHandlerExceptionResolver`。

### ExceptionHandlerExceptionResolver

[@ControllerAdvice](注解式控制器.md#控制器增强) 类可以具有 `@ExceptionHandler`处理来自控制器方法的异常的方法，如以下示例所示：

**java**

```java
@RestControllerAdvice
public class SampleExceptionHandler {

    @ExceptionHandler(IOException.class)
    public Object handle(IOException ex) {
        // TODO ...
    }
}
```

**kotlin**

```kotlin
@RestControllerAdvice
class SampleExceptionHandler {

    @ExceptionHandler(IOException::class)
    fun handle(ex: IOException): Any {
        // TODO ...
    }
}
```

异常可以与正在传播的顶级异常（例如，直接 `IOException`抛出）或与包装器异常中的嵌套原因（例如，`IOException`包装在 中`IllegalStateException`）匹配。

对于匹配的异常类型，最好将目标异常声明为方法参数，如上面的示例所示。当多个异常方法匹配时，根异常匹配通常优于原因异常匹配。更具体地说，`ExceptionDepthComparator` 它根据抛出的异常类型的深度对异常进行排序。

或者，注释声明可以缩小要匹配的异常类型，如以下示例所示：

**java**

```java
@ExceptionHandler({FileSystemException.class, RemoteException.class})
public Object handle(IOException ex) {
    // TODO ...
}
```

**kotlin**

```kotlin
@ExceptionHandler(FileSystemException::class, RemoteException::class)
fun handle(ex: IOException): Any {
   // TODO ...
}
```

#### 方法参数

`@ExceptionHandler`方法支持以下参数：

| 方法参数            | 描述                 |
| ------------------- | -------------------- |
| RoutingContext      | 当前的路由上下文对象 |
| HttpRequest         | 当前的请求对象       |
| HttpResponse        | 当前的响应对象       |
| ？extends Throwable | 当前抛出的异常类型   |

#### 返回值

参照：[注解式控制器返回值](注解式控制器.md#返回值)
